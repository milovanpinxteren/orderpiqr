{% extends "registration/base_auth.html" %}
{% load static i18n %}

{% block title %}{% trans "Set New Password" %} - OrderPiqR{% endblock %}

{% block content %}
<div class="auth-card">
    <div class="auth-header">
        <img src="{% static 'orderpiqrApp/img/favicon.png' %}" alt="OrderPiqR" class="auth-logo">
        <h1 class="auth-title">{% trans "Set new password" %}</h1>
        <p class="auth-subtitle">{% trans "Enter your new password below" %}</p>
    </div>

    <div class="auth-body">
        {% if validlink %}
            {% if form.errors %}
            <div class="alert alert-error">
                {% for field in form %}
                    {% for error in field.errors %}
                    <div>{{ error }}</div>
                    {% endfor %}
                {% endfor %}
                {% for error in form.non_field_errors %}
                <div>{{ error }}</div>
                {% endfor %}
            </div>
            {% endif %}

            <form method="POST">
                {% csrf_token %}

                <div class="form-group">
                    <label class="form-label required" for="id_new_password1">{% trans "New Password" %}</label>
                    <input type="password"
                           class="form-control {% if form.new_password1.errors %}error{% endif %}"
                           id="id_new_password1"
                           name="new_password1"
                           placeholder="{% trans 'Enter new password' %}"
                           autofocus
                           required>
                    <span class="form-hint">{% trans "Minimum 8 characters" %}</span>
                </div>

                <div class="form-group">
                    <label class="form-label required" for="id_new_password2">{% trans "Confirm New Password" %}</label>
                    <input type="password"
                           class="form-control {% if form.new_password2.errors %}error{% endif %}"
                           id="id_new_password2"
                           name="new_password2"
                           placeholder="{% trans 'Confirm new password' %}"
                           required>
                </div>

                <div style="margin-top: 24px;">
                    <button type="submit" class="btn btn-primary">
                        {% trans "Reset Password" %}
                    </button>
                </div>
            </form>
        {% else %}
            <div class="alert alert-error">
                {% trans "This password reset link is invalid or has expired. Please request a new one." %}
            </div>
            <div style="margin-top: 24px;">
                <a href="{% url 'password_reset' %}" class="btn btn-primary">
                    {% trans "Request New Link" %}
                </a>
            </div>
        {% endif %}
    </div>

    <div class="auth-footer">
        <a href="{% url 'login' %}">{% trans "Back to login" %}</a>
    </div>
</div>
{% endblock %}
