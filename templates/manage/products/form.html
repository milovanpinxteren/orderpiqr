{% extends "manage/base.html" %}
{% load static i18n %}

{% block title %}{% if is_create %}{% trans "Add Product" %}{% else %}{% trans "Edit Product" %}{% endif %}{% endblock %}
{% block page_title %}{% if is_create %}{% trans "Add Product" %}{% else %}{% trans "Edit Product" %}{% endif %}{% endblock %}
{% block page_subtitle %}
<p class="page-subtitle">
    {% if is_create %}{% trans "Create a new product in your inventory" %}
    {% else %}{% trans "Update product details" %}{% endif %}
</p>
{% endblock %}

{% block content %}
<div class="form-container">
    <form method="post" class="card">
        {% csrf_token %}
        <div class="card-body">
            <div class="form-group">
                <label class="form-label required" for="code">{% trans "Product Code" %}</label>
                <input type="text" class="form-control" id="code" name="code"
                       value="{% if form_data %}{{ form_data.code }}{% elif product %}{{ product.code }}{% endif %}"
                       placeholder="{% trans 'e.g., SKU-001' %}"
                       required autofocus>
                <p class="form-text">{% trans "A unique identifier for this product" %}</p>
            </div>

            <div class="form-group">
                <label class="form-label required" for="description">{% trans "Description" %}</label>
                <input type="text" class="form-control" id="description" name="description"
                       value="{% if form_data %}{{ form_data.description }}{% elif product %}{{ product.description }}{% endif %}"
                       placeholder="{% trans 'e.g., Blue Widget - Large' %}"
                       required>
                <p class="form-text">{% trans "A short description of the product" %}</p>
            </div>

            <div class="form-group">
                <label class="form-label" for="location">{% trans "Location" %}</label>
                <input type="text" class="form-control" id="location" name="location"
                       value="{% if form_data %}{{ form_data.location }}{% elif product %}{{ product.location }}{% endif %}"
                       placeholder="{% trans 'e.g., Aisle 3, Shelf B' %}">
                <p class="form-text">{% trans "Where this product is stored in your warehouse" %}</p>
            </div>

            <div class="form-group">
                <label class="form-label">{% trans "Status" %}</label>
                <div class="checkbox-group">
                    <label class="checkbox-label">
                        <input type="checkbox" name="active"
                               {% if form_data %}{% if form_data.active == 'on' %}checked{% endif %}
                               {% elif product %}{% if product.active %}checked{% endif %}
                               {% else %}checked{% endif %}>
                        <span class="checkbox-text">{% trans "Active" %}</span>
                    </label>
                    <p class="form-text">{% trans "Inactive products won't appear in new orders" %}</p>
                </div>
            </div>
        </div>

        <div class="card-footer">
            <div class="form-actions">
                <a href="{% url 'manage_products' %}" class="btn btn-secondary">{% trans "Cancel" %}</a>
                <button type="submit" class="btn btn-primary">
                    {% if is_create %}{% trans "Create Product" %}{% else %}{% trans "Save Changes" %}{% endif %}
                </button>
            </div>
        </div>
    </form>
</div>

<style>
.form-container {
    max-width: 600px;
}

.checkbox-group {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.checkbox-label {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    cursor: pointer;
}

.checkbox-label input[type="checkbox"] {
    width: 18px;
    height: 18px;
    accent-color: var(--primary);
}

.checkbox-text {
    font-weight: 500;
}

.form-actions {
    display: flex;
    gap: var(--spacing-sm);
    justify-content: flex-end;
}
</style>
{% endblock %}
